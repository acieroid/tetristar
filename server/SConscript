Import('env', 'LINUX', 'LUA', 'GLIB')

server_env = env.Clone()

sources = ['main.c', 'global_state.c', 'configuration.c', 'util.c',
           'network.c', 'plugins.c', 'lua_plugin.c']

if LINUX == '1':
    server_env['LIBS'] += ['enet']
else:
    sources += ['/usr/local/lib/libenet.a']

LIBS = [LUA, GLIB]

for lib in LIBS:
    server_env.ParseConfig('pkg-config ' + lib + ' --cflags --libs')

server_env['LIBS'] += ['tetris']

server = server_env.Program(target = 'server', source = sources)
